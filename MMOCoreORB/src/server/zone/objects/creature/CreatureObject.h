/*
 *	server/zone/objects/creature/CreatureObject.h generated by engine3 IDL compiler 0.60
 */

#ifndef CREATUREOBJECT_H_
#define CREATUREOBJECT_H_

#include "engine/core/Core.h"

#include "engine/core/ManagedReference.h"

#include "engine/core/ManagedWeakReference.h"

namespace server {
namespace chat {

class StringIdChatParameter;

} // namespace chat
} // namespace server

using namespace server::chat;

namespace server {
namespace zone {
namespace objects {
namespace group {

class GroupObject;

} // namespace group
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::group;

namespace server {
namespace zone {
namespace objects {
namespace guild {

class GuildObject;

} // namespace guild
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::guild;

namespace server {
namespace zone {
namespace objects {
namespace tangible {
namespace weapon {

class WeaponObject;

} // namespace weapon
} // namespace tangible
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::tangible::weapon;

namespace server {
namespace zone {
namespace managers {
namespace objectcontroller {

class ObjectController;

} // namespace objectcontroller
} // namespace managers
} // namespace zone
} // namespace server

using namespace server::zone::managers::objectcontroller;

namespace server {
namespace zone {
namespace objects {
namespace creature {

class CreatureObject;

} // namespace creature
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::creature;

namespace server {
namespace zone {
namespace objects {
namespace creature {
namespace ai {

class AiActor;

} // namespace ai
} // namespace creature
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::creature::ai;

namespace server {
namespace zone {
namespace objects {
namespace player {

class PlayerObject;

} // namespace player
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::player;

namespace server {
namespace zone {
namespace objects {
namespace scene {

class SceneObject;

} // namespace scene
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::scene;

namespace server {
namespace zone {
namespace objects {
namespace intangible {

class ControlDevice;

} // namespace intangible
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::intangible;

namespace server {
namespace zone {
namespace objects {
namespace area {

class ActiveArea;

} // namespace area
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::area;

namespace server {
namespace zone {
namespace objects {
namespace area {

class CampSiteActiveArea;

} // namespace area
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::area;

namespace server {
namespace zone {

class Zone;

} // namespace zone
} // namespace server

using namespace server::zone;

namespace server {
namespace zone {
namespace templates {

class SharedObjectTemplate;

} // namespace templates
} // namespace zone
} // namespace server

using namespace server::zone::templates;

namespace server {
namespace zone {
namespace objects {
namespace creature {
namespace buffs {

class Buff;

} // namespace buffs
} // namespace creature
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::creature::buffs;

namespace server {
namespace zone {
namespace objects {
namespace tangible {
namespace weapon {

class WeaponObject;

} // namespace weapon
} // namespace tangible
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::tangible::weapon;

namespace server {
namespace zone {

class ZoneClientSession;

} // namespace zone
} // namespace server

using namespace server::zone;

#include "server/zone/objects/creature/variables/CooldownTimerMap.h"

#include "server/zone/objects/creature/buffs/BuffList.h"

#include "server/zone/objects/creature/damageovertime/DamageOverTimeList.h"

#include "server/zone/objects/scene/variables/DeltaVector.h"

#include "server/zone/objects/creature/variables/CommandQueueActionVector.h"

#include "server/zone/objects/scene/variables/DeltaVectorMap.h"

#include "server/zone/objects/creature/variables/SkillList.h"

#include "server/zone/objects/creature/variables/SkillModList.h"

#include "server/zone/objects/creature/variables/SkillModEntry.h"

#include "server/zone/objects/creature/variables/CommandQueueAction.h"

#include "server/zone/objects/creature/CreaturePosture.h"

#include "server/zone/objects/creature/CreatureState.h"

#include "server/zone/objects/creature/SpeedMultiplierModChanges.h"

#include "server/zone/objects/creature/variables/Skill.h"

#include "server/zone/objects/creature/variables/WearablesDeltaVector.h"

#include "server/zone/objects/tangible/TangibleObject.h"

#include "engine/core/ManagedObject.h"

#include "engine/lua/LuaObject.h"

#include "system/util/Vector.h"

#include "system/util/VectorMap.h"

#include "system/lang/Time.h"

#include "system/util/SortedVector.h"

#include "system/lang/Long.h"

#include "engine/service/proto/BasePacket.h"

namespace server {
namespace zone {
namespace objects {
namespace creature {

class CreatureObject : public TangibleObject {
public:
	static const int HUMAN = 0;

	static const int RODIAN = 1;

	static const int TRANDOSHAN = 2;

	static const int MONCAL = 3;

	static const int WOOKIE = 4;

	static const int BOTHAN = 5;

	static const int TWILEK = 6;

	static const int ZABRAK = 7;

	static const int ITHORIAN = 0x21;

	static const int SULLUSTAN = 0x31;

	static const int MALE = 0;

	static const int FEMALE = 1;

	unsigned static const long long DEAD_TOO_LONG = 1800000;

	CreatureObject();

	void initializeMembers();

	void createChildObjects();

	void loadTemplateData(SharedObjectTemplate* templateData);

	void initializeTransientMembers();

	void clearQueueAction(unsigned int actioncntr, float timer = 0, unsigned int tab1 = 0, unsigned int tab2 = 0);

	void sendBaselinesTo(SceneObject* player);

	void sendToOwner(bool doClose = true);

	void sendTo(SceneObject* player, bool doClose);

	void sendSystemMessage(const String& message);

	void playMusicMessage(const String& file);

	void sendNewbieTutorialRequest(const String& request);

	void sendNewbieTutorialEnableHudElement(const String& ui, bool enable = true);

	void sendOpenHolocronToPageMessage();

	void sendSystemMessage(UnicodeString& message);

	void sendSystemMessage(StringIdChatParameter& stringid);

	void sendSlottedObjectsTo(SceneObject* player);

	void setCombatState();

	void clearCombatState(bool clearDefenders = true);

	void setPosture(int newPosture, bool notifyClient = true);

	void updateLocomotion();

	void setHeight(float heigh, bool notifyClient = true);

	void setAccelerationMultiplierBase(float newMultiplierBase, bool notifyClient = true);

	void setAccelerationMultiplierMod(float newMultiplierMod, bool notifyClient = true);

	void setSpeedMultiplierBase(float newMultiplierBase, bool notifyClient = true);

	void setSpeedMultiplierMod(float newMultiplierMod, bool notifyClient = true);

	void setTurnScale(float newMultiplierMod, bool notifyClient = true);

	void setRunSpeed(float newSpeed, bool notifyClient = true);

	void setCurrentSpeed(float newSpeed);

	void setHAM(int type, int value, bool notifyClient = true);

	int inflictDamage(TangibleObject* attacker, int damageType, float damage, bool destroy, bool notifyClient = true);

	int inflictDamage(TangibleObject* attacker, int damageType, float damage, bool destroy, const String& xp, bool notifyClient = true);

	bool hasDamage(int attribute);

	int healDamage(TangibleObject* healer, int damageType, int damage, bool notifyClient = true, bool notifyObservers = true);

	int healWound(TangibleObject* healer, int damageType, int damage, bool notifyClient = true, bool notifyObservers = true);

	void setBaseHAM(int type, int value, bool notifyClient = true);

	void setWounds(int type, int value, bool notifyClient = true);

	int addWounds(int type, int value, bool notifyClient = true);

	void setMaxHAM(int type, int value, bool notifyClient = true);

	void addMaxHAM(int type, int value, bool notifyClient = true);

	void setEncumbrance(int type, int value, bool notifyClient = true);

	void addEncumbrance(int type, int value, bool notifyClient = true);

	void setWeapon(WeaponObject* weao, bool notifyClient = false);

	int notifyObjectInserted(SceneObject* object);

	int notifyObjectRemoved(SceneObject* object);

	void setInstrumentID(int instrumentid, bool notifyClient = true);

	void setListenToID(unsigned long long id, bool notifyClient = true);

	void setPerformanceCounter(int counter, bool notifyClient = true);

	void setPerformanceAnimation(const String& animation, bool notifyClient = true);

	void setShockWounds(int newShock, bool notifyClient = true);

	void addShockWounds(int shockToAdd, bool notiyClient = true);

	void setTargetID(unsigned long long targetID, bool notifyClient = true);

	void setBankCredits(int credits, bool notifyClient = true);

	void addBuff(Buff* buff);

	bool removeBuff(unsigned int buffcrc);

	void removeBuff(Buff* buff);

	bool removeStateBuff(unsigned long long state);

	void clearBuffs(bool updateclient);

	void addWearableObject(TangibleObject* object, bool notifyClient = true);

	void removeWearableObject(TangibleObject* object, bool notifyClient = true);

	WearablesDeltaVector* getWearablesDeltaVector();

	void sendBuffsTo(CreatureObject* creature);

	BuffList* getBuffList();

	Buff* getBuff(unsigned int buffcrc);

	long long getSkillModFromBuffs(const String& skillMod);

	int addDotState(unsigned long long dotType, unsigned long long objectID, unsigned int strength, byte type, unsigned int duration, float potency, unsigned int defense);

	bool healDot(unsigned long long dotType, int reduction);

	void clearDots();

	DamageOverTimeList* getDamageOverTimeList();

	bool hasBuff(unsigned int buffcrc);

	void notifySelfPositionUpdate();

	void notifyPostureChange(int newPosture);

	void setLevel(int level);

	void updateToDatabaseAllObjects(bool startTask);

	bool isResuscitable();

	void addBankCredits(int credits, bool notifyClient = true);

	void addCashCredits(int credits, bool notifyClient = true);

	void subtractBankCredits(int credits);

	void subtractCashCredits(int credits);

	bool verifyCashCredits(int credits);

	bool verifyBankCredits(int credits);

	bool isDancing();

	bool isPlayingMusic();

	void stopEntertaining();

	bool isEntertaining();

	void setCashCredits(int credits, bool notifyClient = true);

	void setTerrainNegotiation(float value, bool notifyClient = true);

	void addSkill(Skill* skill, bool notifyClient = true);

	void addSkill(const String& skill, bool notifyClient = true);

	void removeSkill(Skill* skill, bool notifyClient = true);

	void removeSkill(const String& skill, bool notifyClient = true);

	void addSkillMod(const int modType, const String& skillMod, int value, bool notifyClient = true);

	void removeSkillMod(const int modType, const String& skillMod, int value, bool notifyCLient = true);

	void updateGroupInviterID(unsigned long long id, bool notifyClient = true);

	void updateGroup(GroupObject* group, bool notifyClient = true);

	void enqueueCommand(unsigned int actionCRC, unsigned int actionCount, unsigned long long targetID, const UnicodeString& arguments, int priority = -1);

	void setMood(byte moodID, bool notifyClient = true);

	void setMoodString(const String& animation, bool notifyClient = true);

	void deleteQueueAction(unsigned int actionCount);

	bool setState(unsigned long long state, bool notifyClient = true);

	bool clearState(unsigned long long state, bool notifyClient = true);

	void setControlDevice(ControlDevice* device);

	void setCreatureLink(CreatureObject* object, bool notifyClient = true);

	void executeObjectControllerAction(unsigned int actionCRC);

	void executeObjectControllerAction(unsigned int actionCRC, unsigned long long targetID, const UnicodeString& args);

	bool isAttackableBy(CreatureObject* object);

	bool isHealableBy(CreatureObject* object);

	bool isInBountyMission(CreatureObject* bountyHunter, CreatureObject* target);

	void sendConversationStartTo(SceneObject* player);

	void selectConversationOption(int option, SceneObject* obj);

	void sendMessage(BasePacket* msg);

	void sendExecuteConsoleCommand(const String& command);

	bool isAggressiveTo(CreatureObject* object);

	int notifyObjectDestructionObservers(TangibleObject* attacker, int condition);

	int notifyObjectKillObservers(TangibleObject* killer);

	void notifyLoadFromDatabase();

	void setFactionRank(int rank, bool notifyClient = true);

	String getFirstName();

	String getLastName();

	bool isOnline();

	bool canTreatInjuries();

	bool canTreatStates();

	bool canTreatWounds();

	bool canTreatConditions();

	PlayerObject* getPlayerObject();

	AiActor* getActorObject();

	bool isListening();

	bool isWatching();

	void setClient(ZoneClientSession* cli);

	void dismount();

	float calculateBFRatio();

	void setDizziedState(int durationSeconds = 5);

	void setRalliedState(int durationSeconds = 5);

	void setAimingState(int durationSeconds = 5);

	void setCoverState(int durationSeconds = 40);

	void setBerserkedState(unsigned int duration);

	void setStunnedState(int durationSeconds = 5);

	void setBlindedState(int durationSeconds = 5);

	void setIntimidatedState(unsigned int mod, int durationSeconds = 15);

	void setSnaredState(int durationSeconds = 20);

	void setRootedState(int durationSeconds = 20);

	bool setNextAttackDelay(unsigned int mod, int del);

	void setMeditateState();

	void activateHAMRegeneration();

	void activatePassiveWoundRegeneration();

	void activateStateRecovery();

	void updateTimeOfDeath();

	bool hasAttackDelay();

	void removeAttackDelay();

	CooldownTimerMap* getCooldownTimerMap();

	bool hasSpice();

	void updateLastSuccessfulCombatAction();

	void updateKnockdownRecovery();

	void queueDizzyFallEvent();

	void updateLastKnockdown();

	bool checkKnockdownRecovery();

	bool checkLastKnockdown();

	void updatePostureDownRecovery();

	void updatePostureUpRecovery();

	bool checkPostureDownRecovery();

	unsigned long long getScreenPlayState(const String& screenPlay);

	void setScreenPlayState(const String& screenPlay, unsigned long long state);

	bool checkPostureUpRecovery();

	void updateCooldownTimer(const String& coooldownTimer, unsigned int miliSecondsToAdd = 0);

	bool checkCooldownRecovery(const String& cooldown);

	Time* getCooldownTime(const String& cooldown);

	void addCooldown(const String& name, unsigned int miliseconds);

	void doAnimation(const String& animation);

	void doCombatAnimation(CreatureObject* defender, unsigned int animationCRC, byte hit, byte trails);

	void playEffect(const String& file, const String& aux);

	void playEffect(const String& file);

	void activateQueueAction();

	void activateImmediateAction();

	UnicodeString getCreatureName();

	bool isGrouped();

	int getBankCredits();

	int getCashCredits();

	int getBaseHAM(int idx);

	int getWounds(int idx);

	DeltaVector<int>* getWounds();

	int getHAM(int idx);

	DeltaVector<int>* getHAM();

	int getMaxHAM(int idx);

	DeltaVector<int>* getMaxHAM();

	int getEncumbrance(int idx);

	DeltaVector<int>* getEncumbrances();

	byte getPosture();

	byte getLocomotion();

	byte getFactionRank();

	CreatureObject* getLinkedCreature();

	unsigned long long getCreatureLinkID();

	float getShockWounds();

	unsigned long long getWatchToID();

	unsigned long long getStateBitmask();

	bool hasState(unsigned long long state);

	bool hasStates();

	unsigned long long getListenID();

	float getAccelerationMultiplierBase();

	float getAccelerationMultiplierMod();

	float getSpeedMultiplierBase();

	float getSpeedMultiplierMod();

	float getCurrentSpeed();

	SpeedMultiplierModChanges* getSpeedMultiplierModChanges();

	CommandQueueActionVector* getCommandQueue();

	float getRunSpeed();

	float getWalkSpeed();

	float getTurnScale();

	float getTerrainNegotiation();

	float getRunAcceleration();

	float getWalkAcceleration();

	String getPerformanceAnimation();

	String getMoodString();

	unsigned long long getWeaponID();

	WeaponObject* getWeapon();

	GuildObject* getGuildObject();

	int getGuildID();

	bool isInGuild();

	void setGuildObject(GuildObject* guildobj);

	unsigned long long getGroupID();

	unsigned long long getGroupInviterID();

	GroupObject* getGroup();

	unsigned long long getGroupInviteCounter();

	unsigned long long getTargetID();

	byte getMoodID();

	float getSlopeModPercent();

	int getPerformanceCounter();

	int getInstrumentID();

	byte getFrozen();

	float getHeight();

	int getSpecies();

	String getSpeciesName();

	int getGender();

	DeltaVector<int>* getBaseHAM();

	SkillList* getSkillList();

	int getSkillMod(const String& skillmod);

	bool hasSkill(const String& skill);

	SkillModList* getSkillModList();

	void setWatchToID(unsigned long long id);

	bool isCreatureObject();

	bool isNextActionPast();

	bool isTrainerCreature();

	bool isSwimming();

	ZoneClientSession* getClient();

	bool isRidingMount();

	ControlDevice* getControlDevice();

	float getSwimHeight();

	bool isIncapacitated();

	bool isDead();

	bool isKnockedDown();

	bool isKneeling();

	bool isProne();

	bool isStanding();

	bool isSitting();

	bool isSkillAnimating();

	bool isRallied();

	bool isInCombat();

	bool isDizzied();

	bool isBerserked();

	bool isStunned();

	bool isBlinded();

	bool isIntimidated();

	bool isSnared();

	bool isImmobilized();

	bool isRooted();

	bool isFrozen();

	bool isDiseased();

	bool isPoisoned();

	bool isBleeding();

	bool isOnFire();

	bool isMounted();

	bool isRidingCreature();

	bool isPeaced();

	bool isMeditating();

	bool isAiming();

	bool isInCover();

	bool isRunning();

	bool isNonPlayerCreatureObject();

	bool isCreature();

	bool isPlayerCreature();

	bool isAiAgent();

	bool isAiActor();

	bool isInformantCreature();

	bool isVendorCreature();

	CampSiteActiveArea* getCurrentCamp();

	byte getCurrentWeather();

	void setCurrentWeather(byte value);

	byte getCurrentWind();

	void setCurrentWind(byte value);

	int handleObjectMenuSelect(CreatureObject* player, byte selectedID);

	void fillAttributeList(AttributeListMessage* msg, CreatureObject* object);

	void destroyObjectFromWorld(bool sendSelfDestroy);

	DistributedObjectServant* _getImplementation();

	void _setImplementation(DistributedObjectServant* servant);

protected:
	CreatureObject(DummyConstructorParameter* param);

	virtual ~CreatureObject();

	friend class CreatureObjectHelper;
};

} // namespace creature
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::creature;

namespace server {
namespace zone {
namespace objects {
namespace creature {

class CreatureObjectImplementation : public TangibleObjectImplementation {
protected:
	ManagedReference<ZoneClientSession* > owner;

	int bankCredits;

	int cashCredits;

	int gender;

	int species;

	DeltaVector<int> baseHAM;

	byte posture;

	byte locomotion;

	byte factionRank;

	ManagedWeakReference<CreatureObject* > linkedCreature;

	ManagedWeakReference<ControlDevice* > controlDevice;

	float shockWounds;

	DeltaVector<int> wounds;

	unsigned long long stateBitmask;

	DeltaVector<int> encumbrances;

	WearablesDeltaVector wearablesVector;

	float accelerationMultiplierBase;

	float accelerationMultiplierMod;

	float speedMultiplierBase;

	SpeedMultiplierModChanges speedMultiplierModChanges;

	float speedMultiplierMod;

	float turnScale;

	float runSpeed;

	float walkSpeed;

	float currentSpeed;

	float terrainNegotiation;

	float runAcceleration;

	float walkAcceleration;

	float height;

	float swimHeight;

	float slopeModPercent;

	float slopeModAngle;

	unsigned long long listenToID;

	unsigned long long watchToID;

	String performanceAnimation;

	String moodString;

	ManagedReference<WeaponObject* > weapon;

	ManagedReference<GroupObject* > group;

	unsigned long long groupInviterID;

	unsigned long long groupInviteCounter;

	ManagedReference<GuildObject* > guild;

	unsigned long long targetID;

	byte moodID;

	int performanceCounter;

	int instrumentID;

	DeltaVector<int> hamList;

	DeltaVector<int> maxHamList;

	byte frozen;

	String templateString;

	SkillList skillList;

	SkillModList skillModList;

	Reference<CommandQueueActionVector* > commandQueue;

	Reference<CommandQueueActionVector* > immediateQueue;

	Time nextAction;

	Reference<CooldownTimerMap* > cooldownTimerMap;

	BuffList creatureBuffs;

	DamageOverTimeList damageOverTimeList;

	Time lastSuccessfulCombatAction;

	Time timeOfDeath;

	VectorMap<String, unsigned long long> screenPlayStates;

	byte healthWoundHeal;

	byte actionWoundHeal;

	byte mindWoundHeal;

	byte currentWeather;

	byte currentWind;

public:
	static const int HUMAN = 0;

	static const int RODIAN = 1;

	static const int TRANDOSHAN = 2;

	static const int MONCAL = 3;

	static const int WOOKIE = 4;

	static const int BOTHAN = 5;

	static const int TWILEK = 6;

	static const int ZABRAK = 7;

	static const int ITHORIAN = 0x21;

	static const int SULLUSTAN = 0x31;

	static const int MALE = 0;

	static const int FEMALE = 1;

	static float DEFAULTRUNSPEED;

	unsigned static const long long DEAD_TOO_LONG = 1800000;

	CreatureObjectImplementation();

	CreatureObjectImplementation(DummyConstructorParameter* param);

	void initializeMembers();

	void finalize();

	void createChildObjects();

	void loadTemplateData(SharedObjectTemplate* templateData);

	void initializeTransientMembers();

	void clearQueueAction(unsigned int actioncntr, float timer = 0, unsigned int tab1 = 0, unsigned int tab2 = 0);

	void sendBaselinesTo(SceneObject* player);

	void sendToOwner(bool doClose = true);

	void sendTo(SceneObject* player, bool doClose);

	void sendSystemMessage(const String& message);

	void playMusicMessage(const String& file);

	void sendNewbieTutorialRequest(const String& request);

	void sendNewbieTutorialEnableHudElement(const String& ui, bool enable = true);

	void sendOpenHolocronToPageMessage();

	void sendSystemMessage(UnicodeString& message);

	void sendSystemMessage(StringIdChatParameter& stringid);

	void sendSlottedObjectsTo(SceneObject* player);

	void setCombatState();

	void clearCombatState(bool clearDefenders = true);

	virtual void setPosture(int newPosture, bool notifyClient = true);

	virtual void updateLocomotion();

	void setHeight(float heigh, bool notifyClient = true);

	void setAccelerationMultiplierBase(float newMultiplierBase, bool notifyClient = true);

	void setAccelerationMultiplierMod(float newMultiplierMod, bool notifyClient = true);

	void setSpeedMultiplierBase(float newMultiplierBase, bool notifyClient = true);

	virtual void setSpeedMultiplierMod(float newMultiplierMod, bool notifyClient = true);

	virtual void setTurnScale(float newMultiplierMod, bool notifyClient = true);

	void setRunSpeed(float newSpeed, bool notifyClient = true);

	void setCurrentSpeed(float newSpeed);

	void setHAM(int type, int value, bool notifyClient = true);

	int inflictDamage(TangibleObject* attacker, int damageType, float damage, bool destroy, bool notifyClient = true);

	int inflictDamage(TangibleObject* attacker, int damageType, float damage, bool destroy, const String& xp, bool notifyClient = true);

	bool hasDamage(int attribute);

	int healDamage(TangibleObject* healer, int damageType, int damage, bool notifyClient = true, bool notifyObservers = true);

	int healWound(TangibleObject* healer, int damageType, int damage, bool notifyClient = true, bool notifyObservers = true);

	void setBaseHAM(int type, int value, bool notifyClient = true);

	void setWounds(int type, int value, bool notifyClient = true);

	int addWounds(int type, int value, bool notifyClient = true);

	void setMaxHAM(int type, int value, bool notifyClient = true);

	void addMaxHAM(int type, int value, bool notifyClient = true);

	void setEncumbrance(int type, int value, bool notifyClient = true);

	void addEncumbrance(int type, int value, bool notifyClient = true);

	void setWeapon(WeaponObject* weao, bool notifyClient = false);

	int notifyObjectInserted(SceneObject* object);

	int notifyObjectRemoved(SceneObject* object);

	void setInstrumentID(int instrumentid, bool notifyClient = true);

	void setListenToID(unsigned long long id, bool notifyClient = true);

	void setPerformanceCounter(int counter, bool notifyClient = true);

	void setPerformanceAnimation(const String& animation, bool notifyClient = true);

	void setShockWounds(int newShock, bool notifyClient = true);

	void addShockWounds(int shockToAdd, bool notiyClient = true);

	void setTargetID(unsigned long long targetID, bool notifyClient = true);

	void setBankCredits(int credits, bool notifyClient = true);

	void addBuff(Buff* buff);

	bool removeBuff(unsigned int buffcrc);

	void removeBuff(Buff* buff);

	bool removeStateBuff(unsigned long long state);

	void clearBuffs(bool updateclient);

	void addWearableObject(TangibleObject* object, bool notifyClient = true);

	void removeWearableObject(TangibleObject* object, bool notifyClient = true);

	WearablesDeltaVector* getWearablesDeltaVector();

	void sendBuffsTo(CreatureObject* creature);

	BuffList* getBuffList();

	Buff* getBuff(unsigned int buffcrc);

	long long getSkillModFromBuffs(const String& skillMod);

	int addDotState(unsigned long long dotType, unsigned long long objectID, unsigned int strength, byte type, unsigned int duration, float potency, unsigned int defense);

	bool healDot(unsigned long long dotType, int reduction);

	void clearDots();

	DamageOverTimeList* getDamageOverTimeList();

	bool hasBuff(unsigned int buffcrc);

	void notifySelfPositionUpdate();

	void notifyPostureChange(int newPosture);

	void setLevel(int level);

	void updateToDatabaseAllObjects(bool startTask);

	bool isResuscitable();

	void addBankCredits(int credits, bool notifyClient = true);

	void addCashCredits(int credits, bool notifyClient = true);

	void subtractBankCredits(int credits);

	void subtractCashCredits(int credits);

	bool verifyCashCredits(int credits);

	bool verifyBankCredits(int credits);

	bool isDancing();

	bool isPlayingMusic();

	void stopEntertaining();

	bool isEntertaining();

	void setCashCredits(int credits, bool notifyClient = true);

	void setTerrainNegotiation(float value, bool notifyClient = true);

	void addSkill(Skill* skill, bool notifyClient = true);

	void addSkill(const String& skill, bool notifyClient = true);

	void removeSkill(Skill* skill, bool notifyClient = true);

	void removeSkill(const String& skill, bool notifyClient = true);

	void addSkillMod(const int modType, const String& skillMod, int value, bool notifyClient = true);

	void removeSkillMod(const int modType, const String& skillMod, int value, bool notifyCLient = true);

	void updateGroupInviterID(unsigned long long id, bool notifyClient = true);

	void updateGroup(GroupObject* group, bool notifyClient = true);

	void enqueueCommand(unsigned int actionCRC, unsigned int actionCount, unsigned long long targetID, const UnicodeString& arguments, int priority = -1);

	void setMood(byte moodID, bool notifyClient = true);

	void setMoodString(const String& animation, bool notifyClient = true);

	void deleteQueueAction(unsigned int actionCount);

	bool setState(unsigned long long state, bool notifyClient = true);

	bool clearState(unsigned long long state, bool notifyClient = true);

	void setControlDevice(ControlDevice* device);

	void setCreatureLink(CreatureObject* object, bool notifyClient = true);

	void executeObjectControllerAction(unsigned int actionCRC);

	void executeObjectControllerAction(unsigned int actionCRC, unsigned long long targetID, const UnicodeString& args);

	bool isAttackableBy(CreatureObject* object);

	bool isHealableBy(CreatureObject* object);

	bool isInBountyMission(CreatureObject* bountyHunter, CreatureObject* target);

	virtual void sendConversationStartTo(SceneObject* player);

	virtual void selectConversationOption(int option, SceneObject* obj);

	void sendMessage(BasePacket* msg);

	void sendExecuteConsoleCommand(const String& command);

	bool isAggressiveTo(CreatureObject* object);

	int notifyObjectDestructionObservers(TangibleObject* attacker, int condition);

	int notifyObjectKillObservers(TangibleObject* killer);

	void notifyLoadFromDatabase();

	void setFactionRank(int rank, bool notifyClient = true);

	String getFirstName();

	String getLastName();

	bool isOnline();

	bool canTreatInjuries();

	bool canTreatStates();

	bool canTreatWounds();

	bool canTreatConditions();

	PlayerObject* getPlayerObject();

	AiActor* getActorObject();

	bool isListening();

	bool isWatching();

	void setClient(ZoneClientSession* cli);

	void dismount();

	float calculateBFRatio();

	void setDizziedState(int durationSeconds = 5);

	void setRalliedState(int durationSeconds = 5);

	void setAimingState(int durationSeconds = 5);

	void setCoverState(int durationSeconds = 40);

	void setBerserkedState(unsigned int duration);

	void setStunnedState(int durationSeconds = 5);

	void setBlindedState(int durationSeconds = 5);

	void setIntimidatedState(unsigned int mod, int durationSeconds = 15);

	void setSnaredState(int durationSeconds = 20);

	void setRootedState(int durationSeconds = 20);

	bool setNextAttackDelay(unsigned int mod, int del);

	void setMeditateState();

	virtual void activateHAMRegeneration();

	virtual void activatePassiveWoundRegeneration();

	virtual void activateStateRecovery();

	void updateTimeOfDeath();

	bool hasAttackDelay();

	void removeAttackDelay();

	CooldownTimerMap* getCooldownTimerMap();

	bool hasSpice();

	void updateLastSuccessfulCombatAction();

	void updateKnockdownRecovery();

	virtual void queueDizzyFallEvent();

	void updateLastKnockdown();

	bool checkKnockdownRecovery();

	bool checkLastKnockdown();

	void updatePostureDownRecovery();

	void updatePostureUpRecovery();

	bool checkPostureDownRecovery();

	unsigned long long getScreenPlayState(const String& screenPlay);

	void setScreenPlayState(const String& screenPlay, unsigned long long state);

	bool checkPostureUpRecovery();

	void updateCooldownTimer(const String& coooldownTimer, unsigned int miliSecondsToAdd = 0);

	bool checkCooldownRecovery(const String& cooldown);

	Time* getCooldownTime(const String& cooldown);

	void addCooldown(const String& name, unsigned int miliseconds);

	void doAnimation(const String& animation);

	void doCombatAnimation(CreatureObject* defender, unsigned int animationCRC, byte hit, byte trails);

	void playEffect(const String& file, const String& aux);

	void playEffect(const String& file);

	void activateQueueAction();

	void activateImmediateAction();

	UnicodeString getCreatureName();

	bool isGrouped();

	int getBankCredits();

	int getCashCredits();

	int getBaseHAM(int idx);

	int getWounds(int idx);

	DeltaVector<int>* getWounds();

	int getHAM(int idx);

	DeltaVector<int>* getHAM();

	int getMaxHAM(int idx);

	DeltaVector<int>* getMaxHAM();

	int getEncumbrance(int idx);

	DeltaVector<int>* getEncumbrances();

	byte getPosture();

	byte getLocomotion();

	byte getFactionRank();

	CreatureObject* getLinkedCreature();

	unsigned long long getCreatureLinkID();

	float getShockWounds();

	unsigned long long getWatchToID();

	unsigned long long getStateBitmask();

	bool hasState(unsigned long long state);

	bool hasStates();

	unsigned long long getListenID();

	float getAccelerationMultiplierBase();

	float getAccelerationMultiplierMod();

	float getSpeedMultiplierBase();

	float getSpeedMultiplierMod();

	float getCurrentSpeed();

	SpeedMultiplierModChanges* getSpeedMultiplierModChanges();

	CommandQueueActionVector* getCommandQueue();

	float getRunSpeed();

	float getWalkSpeed();

	float getTurnScale();

	float getTerrainNegotiation();

	float getRunAcceleration();

	float getWalkAcceleration();

	String getPerformanceAnimation();

	String getMoodString();

	unsigned long long getWeaponID();

	WeaponObject* getWeapon();

	GuildObject* getGuildObject();

	int getGuildID();

	bool isInGuild();

	void setGuildObject(GuildObject* guildobj);

	unsigned long long getGroupID();

	unsigned long long getGroupInviterID();

	GroupObject* getGroup();

	unsigned long long getGroupInviteCounter();

	unsigned long long getTargetID();

	byte getMoodID();

	float getSlopeModPercent();

	int getPerformanceCounter();

	int getInstrumentID();

	byte getFrozen();

	float getHeight();

	int getSpecies();

	String getSpeciesName();

	int getGender();

	DeltaVector<int>* getBaseHAM();

	SkillList* getSkillList();

	int getSkillMod(const String& skillmod);

	bool hasSkill(const String& skill);

	SkillModList* getSkillModList();

	void setWatchToID(unsigned long long id);

	bool isCreatureObject();

	bool isNextActionPast();

	virtual bool isTrainerCreature();

	bool isSwimming();

	ZoneClientSession* getClient();

	bool isRidingMount();

	ControlDevice* getControlDevice();

	float getSwimHeight();

	bool isIncapacitated();

	bool isDead();

	bool isKnockedDown();

	bool isKneeling();

	bool isProne();

	bool isStanding();

	bool isSitting();

	bool isSkillAnimating();

	bool isRallied();

	bool isInCombat();

	bool isDizzied();

	bool isBerserked();

	bool isStunned();

	bool isBlinded();

	bool isIntimidated();

	bool isSnared();

	bool isImmobilized();

	bool isRooted();

	bool isFrozen();

	bool isDiseased();

	bool isPoisoned();

	bool isBleeding();

	bool isOnFire();

	bool isMounted();

	bool isRidingCreature();

	bool isPeaced();

	bool isMeditating();

	bool isAiming();

	bool isInCover();

	bool isRunning();

	virtual bool isNonPlayerCreatureObject();

	virtual bool isCreature();

	bool isPlayerCreature();

	virtual bool isAiAgent();

	bool isAiActor();

	virtual bool isInformantCreature();

	virtual bool isVendorCreature();

	CampSiteActiveArea* getCurrentCamp();

	byte getCurrentWeather();

	void setCurrentWeather(byte value);

	byte getCurrentWind();

	void setCurrentWind(byte value);

	int handleObjectMenuSelect(CreatureObject* player, byte selectedID);

	void fillAttributeList(AttributeListMessage* msg, CreatureObject* object);

	void destroyObjectFromWorld(bool sendSelfDestroy);

	WeakReference<CreatureObject*> _this;

	operator const CreatureObject*();

	DistributedObjectStub* _getStub();
	virtual void readObject(ObjectInputStream* stream);
	virtual void writeObject(ObjectOutputStream* stream);
protected:
	virtual ~CreatureObjectImplementation();

	void _initializeImplementation();

	void _setStub(DistributedObjectStub* stub);

	void lock(bool doLock = true);

	void lock(ManagedObject* obj);

	void rlock(bool doLock = true);

	void wlock(bool doLock = true);

	void wlock(ManagedObject* obj);

	void unlock(bool doLock = true);

	void runlock(bool doLock = true);

	void _serializationHelperMethod();
	bool readObjectMember(ObjectInputStream* stream, const String& name);
	int writeObjectMembers(ObjectOutputStream* stream);

	friend class CreatureObject;
};

class CreatureObjectAdapter : public TangibleObjectAdapter {
public:
	CreatureObjectAdapter(CreatureObject* impl);

	void invokeMethod(sys::uint32 methid, DistributedMethod* method);

	void initializeMembers();

	void finalize();

	void createChildObjects();

	void initializeTransientMembers();

	void clearQueueAction(unsigned int actioncntr, float timer, unsigned int tab1, unsigned int tab2);

	void sendBaselinesTo(SceneObject* player);

	void sendToOwner(bool doClose);

	void sendTo(SceneObject* player, bool doClose);

	void sendSystemMessage(const String& message);

	void playMusicMessage(const String& file);

	void sendNewbieTutorialRequest(const String& request);

	void sendNewbieTutorialEnableHudElement(const String& ui, bool enable);

	void sendOpenHolocronToPageMessage();

	void sendSystemMessage(UnicodeString& message);

	void sendSlottedObjectsTo(SceneObject* player);

	void setCombatState();

	void clearCombatState(bool clearDefenders);

	void setPosture(int newPosture, bool notifyClient);

	void updateLocomotion();

	void setHeight(float heigh, bool notifyClient);

	void setAccelerationMultiplierBase(float newMultiplierBase, bool notifyClient);

	void setAccelerationMultiplierMod(float newMultiplierMod, bool notifyClient);

	void setSpeedMultiplierBase(float newMultiplierBase, bool notifyClient);

	void setSpeedMultiplierMod(float newMultiplierMod, bool notifyClient);

	void setTurnScale(float newMultiplierMod, bool notifyClient);

	void setRunSpeed(float newSpeed, bool notifyClient);

	void setCurrentSpeed(float newSpeed);

	void setHAM(int type, int value, bool notifyClient);

	int inflictDamage(TangibleObject* attacker, int damageType, float damage, bool destroy, bool notifyClient);

	int inflictDamage(TangibleObject* attacker, int damageType, float damage, bool destroy, const String& xp, bool notifyClient);

	bool hasDamage(int attribute);

	int healDamage(TangibleObject* healer, int damageType, int damage, bool notifyClient, bool notifyObservers);

	int healWound(TangibleObject* healer, int damageType, int damage, bool notifyClient, bool notifyObservers);

	void setBaseHAM(int type, int value, bool notifyClient);

	void setWounds(int type, int value, bool notifyClient);

	int addWounds(int type, int value, bool notifyClient);

	void setMaxHAM(int type, int value, bool notifyClient);

	void addMaxHAM(int type, int value, bool notifyClient);

	void setEncumbrance(int type, int value, bool notifyClient);

	void addEncumbrance(int type, int value, bool notifyClient);

	void setWeapon(WeaponObject* weao, bool notifyClient);

	int notifyObjectInserted(SceneObject* object);

	int notifyObjectRemoved(SceneObject* object);

	void setInstrumentID(int instrumentid, bool notifyClient);

	void setListenToID(unsigned long long id, bool notifyClient);

	void setPerformanceCounter(int counter, bool notifyClient);

	void setPerformanceAnimation(const String& animation, bool notifyClient);

	void setShockWounds(int newShock, bool notifyClient);

	void addShockWounds(int shockToAdd, bool notiyClient);

	void setTargetID(unsigned long long targetID, bool notifyClient);

	void setBankCredits(int credits, bool notifyClient);

	void addBuff(Buff* buff);

	bool removeBuff(unsigned int buffcrc);

	void removeBuff(Buff* buff);

	bool removeStateBuff(unsigned long long state);

	void clearBuffs(bool updateclient);

	void addWearableObject(TangibleObject* object, bool notifyClient);

	void removeWearableObject(TangibleObject* object, bool notifyClient);

	void sendBuffsTo(CreatureObject* creature);

	Buff* getBuff(unsigned int buffcrc);

	long long getSkillModFromBuffs(const String& skillMod);

	int addDotState(unsigned long long dotType, unsigned long long objectID, unsigned int strength, byte type, unsigned int duration, float potency, unsigned int defense);

	bool healDot(unsigned long long dotType, int reduction);

	void clearDots();

	bool hasBuff(unsigned int buffcrc);

	void notifySelfPositionUpdate();

	void notifyPostureChange(int newPosture);

	void setLevel(int level);

	void updateToDatabaseAllObjects(bool startTask);

	bool isResuscitable();

	void addBankCredits(int credits, bool notifyClient);

	void addCashCredits(int credits, bool notifyClient);

	void subtractBankCredits(int credits);

	void subtractCashCredits(int credits);

	bool verifyCashCredits(int credits);

	bool verifyBankCredits(int credits);

	bool isDancing();

	bool isPlayingMusic();

	void stopEntertaining();

	bool isEntertaining();

	void setCashCredits(int credits, bool notifyClient);

	void setTerrainNegotiation(float value, bool notifyClient);

	void addSkill(const String& skill, bool notifyClient);

	void removeSkill(const String& skill, bool notifyClient);

	void addSkillMod(const int modType, const String& skillMod, int value, bool notifyClient);

	void removeSkillMod(const int modType, const String& skillMod, int value, bool notifyCLient);

	void updateGroupInviterID(unsigned long long id, bool notifyClient);

	void updateGroup(GroupObject* group, bool notifyClient);

	void enqueueCommand(unsigned int actionCRC, unsigned int actionCount, unsigned long long targetID, const UnicodeString& arguments, int priority);

	void setMood(byte moodID, bool notifyClient);

	void setMoodString(const String& animation, bool notifyClient);

	void deleteQueueAction(unsigned int actionCount);

	bool setState(unsigned long long state, bool notifyClient);

	bool clearState(unsigned long long state, bool notifyClient);

	void setControlDevice(ControlDevice* device);

	void setCreatureLink(CreatureObject* object, bool notifyClient);

	void executeObjectControllerAction(unsigned int actionCRC);

	void executeObjectControllerAction(unsigned int actionCRC, unsigned long long targetID, const UnicodeString& args);

	bool isAttackableBy(CreatureObject* object);

	bool isHealableBy(CreatureObject* object);

	bool isInBountyMission(CreatureObject* bountyHunter, CreatureObject* target);

	void sendConversationStartTo(SceneObject* player);

	void selectConversationOption(int option, SceneObject* obj);

	void sendMessage(BasePacket* msg);

	void sendExecuteConsoleCommand(const String& command);

	bool isAggressiveTo(CreatureObject* object);

	int notifyObjectDestructionObservers(TangibleObject* attacker, int condition);

	int notifyObjectKillObservers(TangibleObject* killer);

	void notifyLoadFromDatabase();

	void setFactionRank(int rank, bool notifyClient);

	String getFirstName();

	String getLastName();

	bool isOnline();

	bool canTreatInjuries();

	bool canTreatStates();

	bool canTreatWounds();

	bool canTreatConditions();

	PlayerObject* getPlayerObject();

	AiActor* getActorObject();

	bool isListening();

	bool isWatching();

	void setClient(ZoneClientSession* cli);

	void dismount();

	float calculateBFRatio();

	void setDizziedState(int durationSeconds);

	void setRalliedState(int durationSeconds);

	void setAimingState(int durationSeconds);

	void setCoverState(int durationSeconds);

	void setBerserkedState(unsigned int duration);

	void setStunnedState(int durationSeconds);

	void setBlindedState(int durationSeconds);

	void setIntimidatedState(unsigned int mod, int durationSeconds);

	void setSnaredState(int durationSeconds);

	void setRootedState(int durationSeconds);

	bool setNextAttackDelay(unsigned int mod, int del);

	void setMeditateState();

	void activateHAMRegeneration();

	void activatePassiveWoundRegeneration();

	void activateStateRecovery();

	void updateTimeOfDeath();

	bool hasAttackDelay();

	void removeAttackDelay();

	bool hasSpice();

	void updateLastSuccessfulCombatAction();

	void updateKnockdownRecovery();

	void queueDizzyFallEvent();

	void updateLastKnockdown();

	bool checkKnockdownRecovery();

	bool checkLastKnockdown();

	void updatePostureDownRecovery();

	void updatePostureUpRecovery();

	bool checkPostureDownRecovery();

	unsigned long long getScreenPlayState(const String& screenPlay);

	void setScreenPlayState(const String& screenPlay, unsigned long long state);

	bool checkPostureUpRecovery();

	void updateCooldownTimer(const String& coooldownTimer, unsigned int miliSecondsToAdd);

	bool checkCooldownRecovery(const String& cooldown);

	void addCooldown(const String& name, unsigned int miliseconds);

	void doAnimation(const String& animation);

	void doCombatAnimation(CreatureObject* defender, unsigned int animationCRC, byte hit, byte trails);

	void playEffect(const String& file, const String& aux);

	void playEffect(const String& file);

	void activateQueueAction();

	void activateImmediateAction();

	UnicodeString getCreatureName();

	bool isGrouped();

	int getBankCredits();

	int getCashCredits();

	int getBaseHAM(int idx);

	int getWounds(int idx);

	int getHAM(int idx);

	int getMaxHAM(int idx);

	int getEncumbrance(int idx);

	byte getPosture();

	byte getLocomotion();

	byte getFactionRank();

	CreatureObject* getLinkedCreature();

	unsigned long long getCreatureLinkID();

	float getShockWounds();

	unsigned long long getWatchToID();

	unsigned long long getStateBitmask();

	bool hasState(unsigned long long state);

	bool hasStates();

	unsigned long long getListenID();

	float getAccelerationMultiplierBase();

	float getAccelerationMultiplierMod();

	float getSpeedMultiplierBase();

	float getSpeedMultiplierMod();

	float getCurrentSpeed();

	float getRunSpeed();

	float getWalkSpeed();

	float getTurnScale();

	float getTerrainNegotiation();

	float getRunAcceleration();

	float getWalkAcceleration();

	String getPerformanceAnimation();

	String getMoodString();

	unsigned long long getWeaponID();

	WeaponObject* getWeapon();

	GuildObject* getGuildObject();

	int getGuildID();

	bool isInGuild();

	void setGuildObject(GuildObject* guildobj);

	unsigned long long getGroupID();

	unsigned long long getGroupInviterID();

	GroupObject* getGroup();

	unsigned long long getGroupInviteCounter();

	unsigned long long getTargetID();

	byte getMoodID();

	float getSlopeModPercent();

	int getPerformanceCounter();

	int getInstrumentID();

	byte getFrozen();

	float getHeight();

	int getSpecies();

	String getSpeciesName();

	int getGender();

	int getSkillMod(const String& skillmod);

	bool hasSkill(const String& skill);

	void setWatchToID(unsigned long long id);

	bool isCreatureObject();

	bool isNextActionPast();

	bool isTrainerCreature();

	bool isSwimming();

	ZoneClientSession* getClient();

	bool isRidingMount();

	ControlDevice* getControlDevice();

	float getSwimHeight();

	bool isIncapacitated();

	bool isDead();

	bool isKnockedDown();

	bool isKneeling();

	bool isProne();

	bool isStanding();

	bool isSitting();

	bool isSkillAnimating();

	bool isRallied();

	bool isInCombat();

	bool isDizzied();

	bool isBerserked();

	bool isStunned();

	bool isBlinded();

	bool isIntimidated();

	bool isSnared();

	bool isImmobilized();

	bool isRooted();

	bool isFrozen();

	bool isDiseased();

	bool isPoisoned();

	bool isBleeding();

	bool isOnFire();

	bool isMounted();

	bool isRidingCreature();

	bool isPeaced();

	bool isMeditating();

	bool isAiming();

	bool isInCover();

	bool isRunning();

	bool isNonPlayerCreatureObject();

	bool isCreature();

	bool isPlayerCreature();

	bool isAiAgent();

	bool isAiActor();

	bool isInformantCreature();

	bool isVendorCreature();

	CampSiteActiveArea* getCurrentCamp();

	byte getCurrentWeather();

	void setCurrentWeather(byte value);

	byte getCurrentWind();

	void setCurrentWind(byte value);

	int handleObjectMenuSelect(CreatureObject* player, byte selectedID);

	void fillAttributeList(AttributeListMessage* msg, CreatureObject* object);

	void destroyObjectFromWorld(bool sendSelfDestroy);

};

class CreatureObjectHelper : public DistributedObjectClassHelper, public Singleton<CreatureObjectHelper> {
	static CreatureObjectHelper* staticInitializer;

public:
	CreatureObjectHelper();

	void finalizeHelper();

	DistributedObject* instantiateObject();

	DistributedObjectServant* instantiateServant();

	DistributedObjectAdapter* createAdapter(DistributedObjectStub* obj);

	friend class Singleton<CreatureObjectHelper>;
};

} // namespace creature
} // namespace objects
} // namespace zone
} // namespace server

using namespace server::zone::objects::creature;

#endif /*CREATUREOBJECT_H_*/
